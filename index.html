<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Tasks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .task-item {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .task-completed {
            animation: strikeThrough 0.3s ease-out forwards;
        }
        @keyframes strikeThrough {
            to {
                text-decoration: line-through;
                opacity: 0.6;
            }
        }
        .fade-out {
            animation: fadeOut 0.3s ease-out forwards;
        }
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateX(20px);
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-2xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-light text-gray-800 mb-2">Daily Tasks</h1>
            <p class="text-gray-500" id="currentDate"></p>
        </header>

        <!-- Stats -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-6 flex justify-between items-center">
            <div class="text-center">
                <p class="text-2xl font-semibold text-gray-800" id="totalTasks">0</p>
                <p class="text-sm text-gray-500">Total Tasks</p>
            </div>
            <div class="text-center">
                <p class="text-2xl font-semibold text-green-600" id="completedTasks">0</p>
                <p class="text-sm text-gray-500">Completed</p>
            </div>
            <div class="text-center">
                <p class="text-2xl font-semibold text-blue-600" id="pendingTasks">0</p>
                <p class="text-sm text-gray-500">Pending</p>
            </div>
        </div>

        <!-- Add Task Form -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
            <form id="taskForm" class="flex gap-2">
                <input 
                    type="text" 
                    id="taskInput" 
                    placeholder="Add a new task..." 
                    class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    autocomplete="off"
                >
                <button 
                    type="submit" 
                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2"
                >
                    <i class="fas fa-plus"></i>
                    Add
                </button>
            </form>
        </div>

        <!-- Task List -->
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-medium text-gray-800">Today's Tasks</h2>
                <button 
                    id="clearCompleted" 
                    class="text-sm text-red-600 hover:text-red-700 transition-colors duration-200 hidden"
                >
                    <i class="fas fa-trash-alt mr-1"></i>
                    Clear Completed
                </button>
            </div>
            <div id="taskList" class="space-y-2">
                <!-- Tasks will be dynamically added here -->
            </div>
            <div id="emptyState" class="text-center py-12 text-gray-400">
                <i class="fas fa-clipboard-list text-5xl mb-4"></i>
                <p class="text-lg">No tasks yet. Add one above!</p>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Initialize
            let tasks = JSON.parse(localStorage.getItem('dailyTasks')) || [];
            let taskIdCounter = tasks.length > 0 ? Math.max(...tasks.map(t => t.id)) + 1 : 1;

            // Set current date
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            $('#currentDate').text(new Date().toLocaleDateString('en-US', options));

            // Render tasks
            renderTasks();
            updateStats();

            // Add task
            $('#taskForm').on('submit', function(e) {
                e.preventDefault();
                const taskText = $('#taskInput').val().trim();
                
                if (taskText) {
                    const newTask = {
                        id: taskIdCounter++,
                        text: taskText,
                        completed: false,
                        createdAt: new Date().toISOString()
                    };
                    
                    tasks.unshift(newTask);
                    saveTasks();
                    renderTasks();
                    updateStats();
                    
                    $('#taskInput').val('').focus();
                }
            });

            // Toggle task completion
            $(document).on('change', '.task-checkbox', function() {
                const taskId = parseInt($(this).data('id'));
                const task = tasks.find(t => t.id === taskId);
                
                if (task) {
                    task.completed = $(this).is(':checked');
                    saveTasks();
                    
                    const taskText = $(this).siblings('.task-text');
                    if (task.completed) {
                        taskText.addClass('task-completed');
                    } else {
                        taskText.removeClass('task-completed');
                    }
                    
                    updateStats();
                }
            });

            // Delete task
            $(document).on('click', '.delete-btn', function() {
                const taskId = parseInt($(this).data('id'));
                const taskItem = $(this).closest('.task-item');
                
                taskItem.addClass('fade-out');
                
                setTimeout(() => {
                    tasks = tasks.filter(t => t.id !== taskId);
                    saveTasks();
                    renderTasks();
                    updateStats();
                }, 300);
            });

            // Clear completed tasks
            $('#clearCompleted').on('click', function() {
                if (confirm('Are you sure you want to clear all completed tasks?')) {
                    tasks = tasks.filter(t => !t.completed);
                    saveTasks();
                    renderTasks();
                    updateStats();
                }
            });

            // Render tasks function
            function renderTasks() {
                const taskList = $('#taskList');
                const emptyState = $('#emptyState');
                
                taskList.empty();
                
                if (tasks.length === 0) {
                    emptyState.show();
                    $('#clearCompleted').hide();
                } else {
                    emptyState.hide();
                    
                    tasks.forEach(task => {
                        const taskElement = $(`
                            <div class="task-item flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors duration-200">
                                <input 
                                    type="checkbox" 
                                    class="task-checkbox w-5 h-5 text-blue-600 rounded focus:ring-blue-500 cursor-pointer" 
                                    data-id="${task.id}"
                                    ${task.completed ? 'checked' : ''}
                                >
                                <span class="task-text flex-1 text-gray-800 ${task.completed ? 'task-completed' : ''}">${escapeHtml(task.text)}</span>
                                <button 
                                    class="delete-btn text-red-500 hover:text-red-700 transition-colors duration-200" 
                                    data-id="${task.id}"
                                >
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        `);
                        taskList.append(taskElement);
                    });
                    
                    // Show clear completed button if there are completed tasks
                    if (tasks.some(t => t.completed)) {
                        $('#clearCompleted').show();
                    } else {
                        $('#clearCompleted').hide();
                    }
                }
            }

            // Update statistics
            function updateStats() {
                const total = tasks.length;
                const completed = tasks.filter(t => t.completed).length;
                const pending = total - completed;
                
                $('#totalTasks').text(total);
                $('#completedTasks').text(completed);
                $('#pendingTasks').text(pending);
            }

            // Save tasks to localStorage
            function saveTasks() {
                localStorage.setItem('dailyTasks', JSON.stringify(tasks));
            }

            // Escape HTML to prevent XSS
            function escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            }
        });
    </script>
</body>
</html>